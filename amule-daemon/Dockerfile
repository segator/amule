FROM alpine:latest

ENV AMULE_VERSION 2.3.2
ENV UPNP_VERSION 1.6.22
ENV CRYPTOPP_VERSION CRYPTOPP_5_6_5
ENV AMULE_PORT 4662
ENV AMULE_DAEMON_PORT 4712
ENV AMULE_WEB_PORT 4711
ENV AMULE_MAX_SOURCES_FILE 500
ENV AMULE_MAX_CONNECTIONS 1500
ENV AMULE_TEMP /amule/tmp
ENV AMULE_INCOMING /amule/download
ENV AMULE_DOWNLOAD_CAPACITY 200000
ENV AMULE_UPLOAD_CAPACITY 10000

RUN apk add -X http://dl-cdn.alpinelinux.org/alpine/edge/testing amule && \
    rm -rf /var/cache/apk/*
    
COPY amule.sh /app/amule.sh


EXPOSE 4711/tcp 4712/tcp 4672/udp 4665/udp 4662/tcp 4662/udp

ENTRYPOINT ["/app/amule.sh"]
